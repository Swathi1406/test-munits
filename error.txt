Caused by: java.util.concurrent.ExecutionException: org.mule.runtime.api.component.execution.ComponentExecutionException: org.mule.runtime.core.api.expression.ExpressionRuntimeException: "You called the function 'read' with these arguments: 
  1: Null (null)
  2: String ("application/csv")
  3: Object ({separator: ";",header: true})

But it expects arguments of these types:
  1: String | Binary
  2: String
  3: Object


4| var rows = read(vars.varOriginalFilePayload, "application/csv", { separator: ";", header: true })
              ^^^^
Trace:
  at main (line: 4, column: 12)" evaluating expression: "%dw 2.0
output application/csv separator=";", header=true, encoding="ISO-8859-15"

var rows = read(vars.varOriginalFilePayload, "application/csv", { separator: ";", header: true })

fun blank(v) = ((v as String default "") as String {class: "trim"}) == ""
fun first4(v) = (v as String default "")[0 to 3]

fun isNullOrZero(v) =
  v == null
  or lower(((v as String default "") as String {class: "trim"})) == "null"
  or (
        (
          (
            (v as String default "") replace /,/ with "."
          ) as Number default 999999
        ) == 0.0
     )

fun anyDate(r) =
  not (blank(r.Absence_Date) and blank(r.First_Day_of_Leave) and blank(r.Last_Day_of_Leave))

fun motId(r) =
  if (!blank(r.MOT_AP_ID_Licenca)) first4(r.MOT_AP_ID_Licenca)
  else if (!blank(r.MOT_AP_ID_Ferias))
          (if (startsWith(((r.MOT_AP_ID_Ferias as String) default "") as String {class:"trim"}, "F")) "2072"
           else (r.MOT_AP_ID_Ferias as String default ""))
  else if (!blank(r.MOT_AP_ID_Time_off)) first4(r.MOT_AP_ID_Time_off)
  else ""

fun startDate(r) =
  if (blank(r.First_Day_of_Leave))
    (r.Absence_Date as String default "")
  else
    (r.First_Day_of_Leave as String default "")

fun endDate(r) =
  if (blank(r.Last_Day_of_Leave))
    (r.Absence_Date as String default "")
  else
    (r.Last_Day_of_Leave as String default "")

fun status(a) =
  if (lower(((a as String default "") as String {class:"trim"})) == "corrigido") "X"
  else ""

---
(rows default [])
  filter isNullOrZero($.Quantidade_Calculada_Horas)
  filter anyDate($)
  map {
    MOT_APP_ID:  motId($),
    EMPLOYEE_ID: ($.Employee_ID as String),
    START_DATE:  startDate($),
    END_DATE:    endDate($),
    STATUS:      status($.Accao)
  }".
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)
	at org.mule.munit.runner.flow.TestFlow$ExceptionAwareCallable.call(TestFlow.java:384)
	at org.mule.munit.runner.flow.TestFlow$ExceptionAwareCallable.call(TestFlow.java:373)
	... 6 more
Caused by: org.mule.runtime.api.component.execution.ComponentExecutionException: org.mule.runtime.core.api.expression.ExpressionRuntimeException: "You called the function 'read' with these arguments: 
  1: Null (null)
  2: String ("application/csv")
  3: Object ({separator: ";",header: true})

But it expects arguments of these types:
  1: String | Binary
  2: String
  3: Object


4| var rows = read(vars.varOriginalFilePayload, "application/csv", { separator: ";", header: true })
              ^^^^
Trace:
  at main (line: 4, column: 12)" evaluating expression: "%dw 2.0
output application/csv separator=";", header=true, encoding="ISO-8859-15"

var rows = read(vars.varOriginalFilePayload, "application/csv", { separator: ";", header: true })

fun blank(v) = ((v as String default "") as String {class: "trim"}) == ""
fun first4(v) = (v as String default "")[0 to 3]

fun isNullOrZero(v) =
  v == null
  or lower(((v as String default "") as String {class: "trim"})) == "null"
  or (
        (
          (
            (v as String default "") replace /,/ with "."
          ) as Number default 999999
        ) == 0.0
     )

fun anyDate(r) =
  not (blank(r.Absence_Date) and blank(r.First_Day_of_Leave) and blank(r.Last_Day_of_Leave))

fun motId(r) =
  if (!blank(r.MOT_AP_ID_Licenca)) first4(r.MOT_AP_ID_Licenca)
  else if (!blank(r.MOT_AP_ID_Ferias))
          (if (startsWith(((r.MOT_AP_ID_Ferias as String) default "") as String {class:"trim"}, "F")) "2072"
           else (r.MOT_AP_ID_Ferias as String default ""))
  else if (!blank(r.MOT_AP_ID_Time_off)) first4(r.MOT_AP_ID_Time_off)
  else ""

fun startDate(r) =
  if (blank(r.First_Day_of_Leave))
    (r.Absence_Date as String default "")
  else
    (r.First_Day_of_Leave as String default "")

fun endDate(r) =
  if (blank(r.Last_Day_of_Leave))
    (r.Absence_Date as String default "")
  else
    (r.Last_Day_of_Leave as String default "")

fun status(a) =
  if (lower(((a as String default "") as String {class:"trim"})) == "corrigido") "X"
  else ""

---
(rows default [])
  filter isNullOrZero($.Quantidade_Calculada_Horas)
  filter anyDate($)
  map {
    MOT_APP_ID:  motId($),
    EMPLOYEE_ID: ($.Employee_ID as String),
    START_DATE:  startDate($),
    END_DATE:    endDate($),
    STATUS:      status($.Accao)
  }".
Caused by: org.mule.runtime.core.api.expression.ExpressionRuntimeException: "You called the function 'read' with these arguments: 
  1: Null (null)
  2: String ("application/csv")
  3: Object ({separator: ";",header: true})

But it expects arguments of these types:
  1: String | Binary
  2: String
  3: Object


4| var rows = read(vars.varOriginalFilePayload, "application/csv", { separator: ";", header: true })
              ^^^^
Trace:
  at main (line: 4, column: 12)" evaluating expression: "%dw 2.0
output application/csv separator=";", header=true, encoding="ISO-8859-15"

var rows = read(vars.varOriginalFilePayload, "application/csv", { separator: ";", header: true })

fun blank(v) = ((v as String default "") as String {class: "trim"}) == ""
fun first4(v) = (v as String default "")[0 to 3]

fun isNullOrZero(v) =
  v == null
  or lower(((v as String default "") as String {class: "trim"})) == "null"
  or (
        (
          (
            (v as String default "") replace /,/ with "."
          ) as Number default 999999
        ) == 0.0
     )

fun anyDate(r) =
  not (blank(r.Absence_Date) and blank(r.First_Day_of_Leave) and blank(r.Last_Day_of_Leave))

fun motId(r) =
  if (!blank(r.MOT_AP_ID_Licenca)) first4(r.MOT_AP_ID_Licenca)
  else if (!blank(r.MOT_AP_ID_Ferias))
          (if (startsWith(((r.MOT_AP_ID_Ferias as String) default "") as String {class:"trim"}, "F")) "2072"
           else (r.MOT_AP_ID_Ferias as String default ""))
  else if (!blank(r.MOT_AP_ID_Time_off)) first4(r.MOT_AP_ID_Time_off)
  else ""

fun startDate(r) =
  if (blank(r.First_Day_of_Leave))
    (r.Absence_Date as String default "")
  else
    (r.First_Day_of_Leave as String default "")

fun endDate(r) =
  if (blank(r.Last_Day_of_Leave))
    (r.Absence_Date as String default "")
  else
    (r.Last_Day_of_Leave as String default "")

fun status(a) =
  if (lower(((a as String default "") as String {class:"trim"})) == "corrigido") "X"
  else ""

---
(rows default [])
  filter isNullOrZero($.Quantidade_Calculada_Horas)
  filter anyDate($)
  map {
    MOT_APP_ID:  motId($),
    EMPLOYEE_ID: ($.Employee_ID as String),
    START_DATE:  startDate($),
    END_DATE:    endDate($),
    STATUS:      status($.Accao)
  }".
Caused by: org.mule.runtime.api.el.ExpressionExecutionException: You called the function 'read' with these arguments: 
  1: Null (null)
  2: String ("application/csv")
  3: Object ({separator: ";",header: true})

But it expects arguments of these types:
  1: String | Binary
  2: String
  3: Object


4| var rows = read(vars.varOriginalFilePayload, "application/csv", { separator: ";", header: true })
              ^^^^
Trace:
  at main (line: 4, column: 12)

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Running test: workday-wfm-absentismo-test-suite-workday-wfm-absentismo-flowTe+
+ st - Test                                                                    +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
ERROR 2026-02-15 21:32:47,266 [munit.01] org.mule.munit.runner.model.Suite: ERROR - test: absentismo-Flow-upload-error - Time elapsed: 0.39 sec
INFO  2026-02-15 21:32:47,290 [[MuleRuntime].uber.06: [prc-auchan-workday-wfm].workday-wfm-absentismo-flow.CPU_LITE @568fd86c] com.auchan.prc-auchan-workday-wfm: Reading Flow configurations
INFO  2026-02-15 21:32:47,300 [[MuleRuntime].uber.03: [prc-auchan-workday-wfm].workday-wfm-absentismo-flow.CPU_INTENSIVE @7dbdd3a1] com.auchan.prc-auchan-workday-wfm: PGP disabled
Feb 15, 2026 9:32:47 PM org.mule.weave.v2.model.service.DefaultLoggingService$ logWarn
WARNING: Using Weave Reader at Runtime May Cause Performance Issues. It is strongly advice to either use with `onlyData=true` or try other MimeType. This format was design for debugging and design only.
INFO  2026-02-15 21:32:47,515 [[MuleRuntime].uber.06: [prc-auchan-workday-wfm].workday-wfm-absentismo-flow.CPU_INTENSIVE @7dbdd3a1] com.auchan.prc-auchan-workday-wfm: absentismo Scheduler flow completed at 2026-02-15T21:32:47.513255800+05:30[Asia/Calcutta]
INFO  2026-02-15 21:32:47,548 [munit.01] org.mule.munit.runner.model.Suite: SUCCESS - test: workday-wfm-absentismo-test-suite-workday-wfm-absentismo-flowTest - Time elapsed: 0.28 sec
================================================================================
= Tests run: 3 - Failed: 0 - Errors: 2 - Skipped: 0 - Time elapsed: 1.34 sec   =
================================================================================
INFO  2026-02-15 21:32:47,550 [munit.01] org.mule.munit.runner.remote.api.server.RunnerServer: Waiting for client connection 
INFO  2026-02-15 21:32:47,552 [Embedded] org.mule.runtime.module.deployment.internal.DefaultArchiveDeployer: ================== Request to Undeploy Artifact: prc-auchan-workday-wfm
INFO  2026-02-15 21:32:47,660 [pool-4-thread-1] org.mule.munit.remote.coverage.server.CoverageServer: Coverage client connection received from view-localhost - true
INFO  2026-02-15 21:32:47,666 [pool-4-thread-1] org.mule.munit.remote.coverage.server.CoverageServer: Coverage client connection received from view-localhost - true
INFO  2026-02-15 21:32:47,669 [Embedded] org.mule.runtime.core.internal.logging: 
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Stopping application 'prc-auchan-workday-wfm'                                +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
INFO  2026-02-15 21:32:47,673 [Embedded] org.mule.runtime.core.internal.construct.FlowConstructLifecycleManager: Stopping flow: workday-wfm-absentismo-flow
INFO  2026-02-15 21:32:47,674 [Embedded] org.mule.runtime.core.internal.construct.AbstractFlowConstruct: Not stopping source for 'workday-wfm-absentismo-flow', it was not started because of org.mule.munit.runner.component.state.MunitComponentInitialStateManager@6dbe2e59
INFO  2026-02-15 21:32:47,690 [pool-12-thread-1] org.mule.munit.remote.coverage.CoverageManager: accumulating covered locations
INFO  2026-02-15 21:32:47,694 [pool-13-thread-1] org.mule.munit.remote.coverage.CoverageManager: accumulating covered locations
WARN  2026-02-15 21:32:52,689 [Embedded] org.mule.runtime.core.internal.processor.strategy.AbstractStreamProcessingStrategyFactory: Subscribers of ProcessingStrategy for flow 'workday-wfm-absentismo-flow' not completed in 5000 ms
WARN  2026-02-15 21:32:52,692 [Embedded] org.mule.runtime.core.internal.processor.strategy.AbstractStreamProcessingStrategyFactory: Subscribers of ProcessingStrategy for flow 'workday-wfm-absentismo-flow' not completed in 5000 ms
INFO  2026-02-15 21:32:52,741 [Embedded] org.mule.runtime.core.internal.lifecycle.AbstractLifecycleManager: Stopping Bean: org.mule.runtime.module.extension.internal.runtime.config.ConfigurationProviderToolingAdapter-HTTPS_Request_Oauth2token
INFO  2026-02-15 21:32:52,742 [Embedded] org.mule.runtime.core.internal.lifecycle.AbstractLifecycleManager: Stopping Bean: org.mule.runtime.module.extension.internal.runtime.config.ConfigurationProviderToolingAdapter-HTTPS_Request_GoogleFileUpload
INFO  2026-02-15 21:32:52,742 [Embedded] org.mule.runtime.core.internal.lifecycle.AbstractLifecycleManager: Stopping Bean: org.mule.runtime.module.extension.internal.runtime.config.ConfigurationProviderToolingAdapter-Auchan_SFTP_Config
INFO  2026-02-15 21:32:52,743 [Embedded] org.mule.runtime.core.internal.lifecycle.AbstractLifecycleManager: Stopping Bean: org.mule.runtime.module.extension.internal.runtime.config.ConfigurationProviderToolingAdapter-Crypto_Pgp
INFO  2026-02-15 21:32:52,743 [Embedded] org.mule.runtime.core.internal.lifecycle.AbstractLifecycleManager: Stopping Bean: org.mule.runtime.module.extension.internal.runtime.config.ConfigurationProviderToolingAdapter-Amazon_S3_Configuration
INFO  2026-02-15 21:32:52,842 [Embedded] org.mule.runtime.core.internal.logging: 
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Disposing application 'prc-auchan-workday-wfm'                               +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
INFO  2026-02-15 21:32:52,843 [Embedded] org.mule.runtime.core.internal.logging: Stopping app 'prc-auchan-workday-wfm' with no mule context
INFO  2026-02-15 21:32:52,973 [Embedded] org.mule.runtime.core.internal.lifecycle.AbstractLifecycleManager: Disposing Bean: org.mule.runtime.module.extension.internal.runtime.config.ConfigurationProviderToolingAdapter-HTTPS_Request_Oauth2token
INFO  2026-02-15 21:32:52,973 [Embedded] org.mule.runtime.core.internal.lifecycle.AbstractLifecycleManager: Disposing Bean: org.mule.runtime.module.extension.internal.runtime.config.ConfigurationProviderToolingAdapter-HTTPS_Request_GoogleFileUpload
INFO  2026-02-15 21:32:52,973 [Embedded] org.mule.runtime.core.internal.lifecycle.AbstractLifecycleManager: Disposing Bean: org.mule.runtime.module.extension.internal.runtime.config.ConfigurationProviderToolingAdapter-Auchan_SFTP_Config
INFO  2026-02-15 21:32:52,973 [Embedded] org.mule.runtime.core.internal.lifecycle.AbstractLifecycleManager: Disposing Bean: org.mule.runtime.module.extension.internal.runtime.config.ConfigurationProviderToolingAdapter-Crypto_Pgp
INFO  2026-02-15 21:32:52,973 [Embedded] org.mule.runtime.core.internal.lifecycle.AbstractLifecycleManager: Disposing Bean: org.mule.runtime.module.extension.internal.runtime.config.ConfigurationProviderToolingAdapter-Amazon_S3_Configuration
INFO  2026-02-15 21:32:52,975 [Embedded] org.mule.runtime.core.internal.construct.FlowConstructLifecycleManager: Disposing flow: workday-wfm-absentismo-flow
INFO  2026-02-15 21:32:53,265 [Embedded] org.mule.runtime.core.internal.logging: 
**********************************************************************
* Application "prc-auchan-workday-wfm" shut down normally on:        *
* 15/02/26, 9:32 pm                                                  *
* Up for: 0 days, 0 hours, 0 mins, 25.110 sec                        *
**********************************************************************
INFO  2026-02-15 21:32:53,732 [Embedded] org.mule.runtime.core.internal.logging: 
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Undeployed artifact 'prc-auchan-workday-wfm'                                 +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
INFO  2026-02-15 21:32:53,734 [Embedded] org.mule.runtime.core.internal.logging: 
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Stopping domain 'default'                                                    +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
INFO  2026-02-15 21:32:53,735 [Embedded] org.mule.runtime.core.internal.logging: 
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Disposing domain 'default'                                                   +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
INFO  2026-02-15 21:32:53,736 [Embedded] org.mule.runtime.core.internal.logging: 
**********************************************************************
* Domain "default" shut down normally on: 15/02/26, 9:32 pm          *
* Up for: 0 days, 0 hours, 0 mins, 33.229 sec                        *
**********************************************************************
INFO  2026-02-15 21:32:53,735 [Embedded] org.mule.runtime.core.internal.logging: Stopping domain 'default' with no mule context
INFO  2026-02-15 21:32:53,947 [Embedded] org.mule.service.scheduler.internal.service.DefaultSchedulerService: Stopping DefaultSchedulerService...
INFO  2026-02-15 21:32:54,069 [Embedded] org.mule.service.scheduler.internal.service.DefaultSchedulerService: Stopped org.mule.service.scheduler.internal.service.DefaultSchedulerService$1@7fe6ac59
INFO  2026-02-15 21:32:55,103 [main] org.mule.munit.remote.coverage.CoverageManager: Shutting down coverage server
INFO  2026-02-15 21:32:55,108 [main] org.mule.munit.remote.coverage.CoverageManager: Calculating application coverage
INFO  2026-02-15 21:32:55,142 [main] org.mule.munit.remote.RemoteRunner: Done
